---
import Home from "../layouts/Home.astro";

import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';

import sortByEpisodeNumber from "../utils/sortByEpisodeNumber.js";

const allPosts = await getCollection('episodes');
const colorInURL = Astro.url.pathname.slice(1,-1);
console.log(colorInURL);
const posts = allPosts
      .filter((post: CollectionEntry<'episodes'>) => (post.data.guest_color === colorInURL))
      .sort(sortByEpisodeNumber);

---

<Home episodes = { posts } colorInURL = {colorInURL} />